(venv) jay@RoboPi:~/rover_project $ nano autonomous_bluetooth_working_v4.py
(venv) jay@RoboPi:~/rover_project $ python3 autonomous_bluetooth_working_v4.py
âœ… Bluetooth (bleak) library available
===========================================================================
ğŸ¤– AUTONOMOUS BLUETOOTH-HYBRID NAVIGATOR v4 (WORKING RSSI)
===========================================================================

Features:
  âœ… Proven ultrasonic obstacle detection and avoidance
  âœ… Arduino gatekeeper integration
  âœ… Enhanced state-based navigation with improved stuck recovery
  âœ… Comprehensive error handling and statistics
  ğŸ“¡ WORKING: Properly integrated callback-based RSSI scanning
  ğŸ›¡ï¸ Safety-first design - ultrasonic overrides Bluetooth
  ğŸ“Š Accurate distance tracking with real signal strength
  ğŸ”§ Step 1: Passive detection (0% navigation influence)
  ğŸ§µ Fixed threading integration - no more task warnings

ğŸš€ Bluetooth-Hybrid Navigator v4 (WORKING RSSI) Initialized
ğŸ“Š Danger: 30.0cm | Caution: 60.0cm | Safe: 100.0cm
ğŸ“¡ Bluetooth: Enabled
ğŸ“¡ BT Method: Proper thread integration with callback scanning
ğŸ“¡ BT Weight: 0% navigation influence
âœ… Arduino connected on /dev/ttyUSB0
ğŸ“¡ Starting WORKING Bluetooth thread worker...
ğŸ“¡ WORKING callback-based Bluetooth scanner started
ğŸ“¡ WORKING Bluetooth scanner main started
ğŸš€ WORKING Navigator started
ğŸ¯ Ready for autonomous navigation with WORKING Bluetooth RSSI tracking
âœ… WORKING Navigator ready - switch to autonomous mode
ğŸ“¡ WORKING RSSI Bluetooth tracking will activate automatically
ğŸ” Watch for WORKING signal strength values!
Press Ctrl+C to stop...
ğŸ“¡ Starting WORKING BLE callback scanner...
ğŸ“¡ WORKING BLE scanner started successfully
ğŸ“¡ Stopping WORKING BLE scanner...
ğŸš¨ EMERGENCY! Obstacle at 15.7cm - turning left
ğŸ§­ AUTONOMOUS | AVOIDING | US: 15.7cm | BT: 8.9m (-78dBm WORK) | CB: 1 | Runtime: 5s
ğŸ“¡ Starting WORKING BLE callback scanner...
ğŸ“¡ WORKING BLE scanner started successfully
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸš¨ EMERGENCY! Obstacle at 17.5cm - turning right
ğŸ§­ AUTONOMOUS | AVOIDING | US: 17.5cm | BT: 4.5m (-72dBm WORK) | CB: 2 | Runtime: 8s
ğŸ“¡ Stopping WORKING BLE scanner...
ğŸ“¡ Starting WORKING BLE callback scanner...
ğŸ“¡ WORKING BLE scanner started successfully
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸ“¡ Stopping WORKING BLE scanner...
ğŸ” EXPLORING: Random turn after 14.5s
ğŸ“¡ Starting WORKING BLE callback scanner...
ğŸ“¡ WORKING BLE scanner started successfully
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 4 | Runtime: 26s
ğŸ“¡ BlueCharm WORKING #5:
   RSSI: -62dBm | Distance: ~1.4m | Avg: -71dBm
ğŸ“¡ Stopping WORKING BLE scanner...
ğŸ” EXPLORING: Random turn after 10.5s
ğŸ“¡ Starting WORKING BLE callback scanner...
ğŸ“¡ WORKING BLE scanner started successfully
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 1.8m (-64dBm WORK) | CB: 9 | Runtime: 38s
ğŸ“¡ BlueCharm WORKING #10:
   RSSI: -60dBm | Distance: ~1.1m | Avg: -68dBm
ğŸš¨ EMERGENCY! Obstacle at 27.3cm - turning left
ğŸ§­ AUTONOMOUS | AVOIDING | US: 200.0cm | BT: 7.9m (-77dBm WORK) | CB: 11 | Runtime: 41s
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸš¨ EMERGENCY! Obstacle at 23.4cm - turning right
ğŸ§­ AUTONOMOUS | AVOIDING | US: 23.1cm | BT: 1.8m (-64dBm WORK) | CB: 14 | Runtime: 44s
ğŸ“¡ BlueCharm WORKING #15:
   RSSI: -62dBm | Distance: ~1.4m | Avg: -67dBm
ğŸ”„ STUCK: Backing up (count: 1)
ğŸ§­ AUTONOMOUS | BACKING | US: 200.0cm | BT: 1.3m (-61dBm WORK) | CB: 16 | Runtime: 47s
   Stuck counter: 1/5
ğŸ”„ RETRY: Switching to left turn (stuck: 1)
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸš¨ EMERGENCY! Obstacle at 20.0cm - turning left
ğŸ§­ AUTONOMOUS | AVOIDING | US: 20.0cm | BT: 2.2m (-66dBm WORK) | CB: 18 | Runtime: 50s
   Stuck counter: 1/5
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸš¨ EMERGENCY! Obstacle at 17.8cm - turning right
ğŸ§­ AUTONOMOUS | AVOIDING | US: 18.2cm | BT: 1.6m (-63dBm WORK) | CB: 19 | Runtime: 53s
   Stuck counter: 1/5
ğŸ“¡ BlueCharm WORKING #20:
   RSSI: -70dBm | Distance: ~3.5m | Avg: -66dBm
ğŸ”„ STUCK: Backing up (count: 2)
ğŸ§­ AUTONOMOUS | BACKING | US: 200.0cm | BT: 0.8m (-57dBm WORK) | CB: 22 | Runtime: 56s
   Stuck counter: 1/5
ğŸ”„ RETRY: Switching to left turn (stuck: 1)
ğŸ§­ AUTONOMOUS | AVOIDING | US: 14.8cm | BT: 1.8m (-64dBm WORK) | CB: 24 | Runtime: 59s
   Stuck counter: 1/5
ğŸ”„ STUCK: Backing up (count: 2)
ğŸ“¡ BlueCharm WORKING #25:
   RSSI: -67dBm | Distance: ~2.5m | Avg: -65dBm
ğŸ“¡ Stopping WORKING BLE scanner...
ğŸ”„ RETRY: Switching to right turn (stuck: 2)
ğŸ§­ AUTONOMOUS | AVOIDING | US: 200.0cm | BT: 2.5m (-67dBm WORK) | CB: 25 | Runtime: 62s
   Stuck counter: 2/5
ğŸ“¡ Starting WORKING BLE callback scanner...
ğŸ“¡ WORKING BLE scanner started successfully
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸš¨ EMERGENCY! Obstacle at 18.1cm - turning left
ğŸ§­ AUTONOMOUS | AVOIDING | US: 20.6cm | BT: 11.2m (-80dBm WORK) | CB: 26 | Runtime: 65s
   Stuck counter: 2/5
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 1.8m (-64dBm WORK) | CB: 28 | Runtime: 68s
   Stuck counter: 1/5
ğŸš¨ EMERGENCY! Obstacle at 24.7cm - turning right
ğŸ§­ AUTONOMOUS | AVOIDING | US: 18.9cm | BT: 1.3m (-61dBm WORK) | CB: 29 | Runtime: 71s
   Stuck counter: 1/5
ğŸ“¡ BlueCharm WORKING #30:
   RSSI: -73dBm | Distance: ~5.0m | Avg: -67dBm
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸš¨ EMERGENCY! Obstacle at 21.5cm - turning left
ğŸ§­ AUTONOMOUS | AVOIDING | US: 20.3cm | BT: 1.6m (-63dBm WORK) | CB: 31 | Runtime: 74s
   Stuck counter: 1/5
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 2.5m (-67dBm WORK) | CB: 32 | Runtime: 77s
ğŸ“¡ BlueCharm WORKING #35:
   RSSI: -70dBm | Distance: ~3.5m | Avg: -68dBm
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 3.5m (-70dBm WORK) | CB: 35 | Runtime: 80s
ğŸ” EXPLORING: Random turn after 8.0s
ğŸ§­ AUTONOMOUS | EXPLORING | US: 200.0cm | BT: 6.3m (-75dBm WORK) | CB: 37 | Runtime: 83s
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ“¡ BlueCharm WORKING #40:
   RSSI: -66dBm | Distance: ~2.2m | Avg: -69dBm
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 2.2m (-66dBm WORK) | CB: 40 | Runtime: 86s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 1.8m (-64dBm WORK) | CB: 43 | Runtime: 89s
ğŸš¨ EMERGENCY! Obstacle at 5.9cm - turning right
ğŸ“¡ BlueCharm WORKING #45:
   RSSI: -74dBm | Distance: ~5.6m | Avg: -70dBm
ğŸ§­ AUTONOMOUS | AVOIDING | US: 6.9cm | BT: 5.6m (-74dBm WORK) | CB: 45 | Runtime: 92s
ğŸ”„ STUCK: Backing up (count: 1)
ğŸ”„ RETRY: Switching to left turn (stuck: 1)
ğŸ§­ AUTONOMOUS | AVOIDING | US: 6.4cm | BT: 5.0m (-73dBm WORK) | CB: 47 | Runtime: 95s
   Stuck counter: 1/5
ğŸ”„ STUCK: Backing up (count: 1)
ğŸ§­ AUTONOMOUS | BACKING | US: 6.9cm | BT: 6.3m (-75dBm WORK) | CB: 48 | Runtime: 98s
   Stuck counter: 1/5
ğŸ“¡ Stopping WORKING BLE scanner...
ğŸ”„ RETRY: Switching to right turn (stuck: 1)
ğŸ§­ AUTONOMOUS | AVOIDING | US: 200.0cm | BT: 6.3m (-75dBm WORK) | CB: 49 | Runtime: 104s
   Stuck counter: 1/5
ğŸ“¡ Starting WORKING BLE callback scanner...
ğŸ“¡ WORKING BLE scanner started successfully
ğŸ“¡ BlueCharm WORKING #50:
   RSSI: -66dBm | Distance: ~2.2m | Avg: -71dBm
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 2.8m (-68dBm WORK) | CB: 51 | Runtime: 107s
ğŸš¨ EMERGENCY! Obstacle at 26.2cm - turning left
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 3.5m (-70dBm WORK) | CB: 52 | Runtime: 110s
ğŸ“¡ BlueCharm WORKING #55:
   RSSI: -60dBm | Distance: ~1.1m | Avg: -69dBm
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 1.1m (-60dBm WORK) | CB: 55 | Runtime: 113s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 7.9m (-77dBm WORK) | CB: 58 | Runtime: 116s
ğŸ“¡ BlueCharm WORKING #60:
   RSSI: -67dBm | Distance: ~2.5m | Avg: -68dBm
ğŸ” EXPLORING: Random turn after 8.0s
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 1.3m (-61dBm WORK) | CB: 61 | Runtime: 119s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 1.0m (-59dBm WORK) | CB: 62 | Runtime: 122s
ğŸ“¡ Stopping WORKING BLE scanner...
^C
ğŸ›‘ Shutdown requested by user...
ğŸ›‘ Stopping WORKING Navigator...
ğŸ“Š Final runtime: 130.9 seconds
ğŸ“Š === Enhanced Navigation Statistics ===
   Runtime: 131 seconds
   Distance measurements: 798
   Obstacle avoidances: 11
   Exploration turns: 4
   Emergency stops: 44
   Stuck recoveries: 0
ğŸ“¡ === WORKING RSSI Bluetooth Statistics ===
   Callback detections: 64
   BlueCharm detections: 64
   Callback events: 64
   Detection rate: 0.49/sec
   Callback rate: 0.49/sec
   Strongest RSSI seen: -57 dBm
   Detection timeouts: 3
   Recent avg RSSI: -64.6 dBm
   Avg measurements/sec: 6.1
ğŸ‘‹ WORKING Navigator shutdown complete
(venv) jay@RoboPi:~/rover_project $