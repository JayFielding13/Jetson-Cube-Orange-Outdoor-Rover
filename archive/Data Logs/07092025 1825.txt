(venv) jay@RoboPi:~/rover_project $ (venv) jay@RoboPi:~/rover_project $ python3 autonomous_bluetooth_tracker.py
âœ… Using system Bluetooth commands
============================================================
ğŸ“¡ AUTONOMOUS BLUETOOTH TRACKER
============================================================

Features:
  - Dual TP-Link UB500 antenna direction finding
  - BlueCharm transmitter tracking
  - Park-on-target mission completion
  - Ultrasonic obstacle avoidance
  - RSSI-based ranging and bearing

ğŸ¯ Bluetooth Tracker Initialized
ğŸš— Mission: Park on BlueCharm (within 0.2m)
ğŸ“¡ Antenna separation: 0.3m
ğŸ” Tracking MAC: DD:34:02:09:CA:1E
âœ… Arduino connected on /dev/ttyUSB1
ğŸ“¡ Found Bluetooth adapters: ['hci2', 'hci1', 'hci0']
âœ… Dual antenna setup: hci0 (left), hci1 (right)
âœ… Enabled hci0
âœ… Enabled hci1
ğŸ”„ Starting BLE scan #1 for BlueCharm_190853
ğŸš€ Bluetooth Tracker started
ğŸ¯ Ready for autonomous tracking
âœ… Tracker ready - switch to autonomous mode
ğŸ“¡ Place BlueCharm_190853 on floor for rover to find
ğŸ¯ Mission: Rover will navigate to and park on BlueCharm
Press Ctrl+C to stop...
ğŸ“¡ Scanning with LEFT antenna (hci0)...
ğŸ” BLE scanning with hci0...
â±ï¸ HCI scanning for 3 seconds on hci0...
ğŸ›ï¸ MODE STABLE: MANUAL â†’ AUTONOMOUS
âœ… AUTONOMOUS MODE STABLE - Rover ready to track!
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 6.0s
ğŸš— MOTOR: L=-60, R=60 | State: SEARCHING | Target: False
ğŸ“Š HCI scan got 137 lines
âœ… Found target on hci0: DD:34:02:09:CA:1E (unknown)
ğŸ“¶ hci0 detected target: -55dBm
ğŸ“¡ Scanning with RIGHT antenna (hci1)...
ğŸ” BLE scanning with hci1...
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 6.5s
ğŸš— MOTOR: L=-60, R=60 | State: SEARCHING | Target: False
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 7.0s
ğŸš— MOTOR: L=-60, R=60 | State: SEARCHING | Target: False
â±ï¸ HCI scanning for 3 seconds on hci1...
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 7.5s
ğŸš— MOTOR: L=-60, R=60 | State: SEARCHING | Target: False
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 8.0s
ğŸ” SEARCH FORWARD: L=60, R=60
ğŸš— MOTOR: L=60, R=60 | State: SEARCHING | Target: False
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 8.5s
ğŸ” SEARCH FORWARD: L=60, R=60
ğŸš— MOTOR: L=60, R=60 | State: SEARCHING | Target: False
ğŸ§­ AUTONOMOUS | SEARCHING | Obstacle: 200.0cm | RC: âŒ
ğŸ“¡ Target: NOT DETECTED | Last scan: 6.5s ago | Total scans: 1
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 9.0s
ğŸ” SEARCH FORWARD: L=60, R=60
ğŸš— MOTOR: L=60, R=60 | State: SEARCHING | Target: False
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 9.5s
ğŸ” SEARCH FORWARD: L=60, R=60
ğŸš— MOTOR: L=60, R=60 | State: SEARCHING | Target: False
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 10.0s
ğŸš— MOTOR: L=-60, R=60 | State: SEARCHING | Target: False
ğŸ“Š HCI scan got 139 lines
ğŸ”„ Trying bluetoothctl method on hci1...
ğŸ” BT DATA: detected=False, distance=0.0m, bearing=0.0Â°
ğŸ” SEARCH PATTERN: L=-60, R=60 | Time in state: 10.5s
ğŸš— MOTOR: L=-60, R=60 | State: SEARCHING | Target: False
ğŸ”„ RC UNSTABLE - Stable: AUTONOMOUS | Raw: AUTONOMOUS | Unstable: 0.4s
   ğŸ’¡ RC signal unstable - check connections/interference
ğŸ“Š Bluetoothctl found 0 devices
ğŸ”„ Trying hciscan method on hci1...
âŒ Basic scan error on hci1: Command '['sudo', 'hcitool', '-i', 'hci1', 'scan']' timed out after 10 seconds
ğŸ“Š Scan results: Left=-55dBm, Right=-100dBm
âœ… Signal detected! Processing...
ğŸ¯ TARGET FLAG SET: target_detected = True
ğŸ“¡ Target detected: 5.6m @ 90Â° (Q:90%)
   RSSI: L=-55dBm R=-100dBm
ğŸ”„ Starting BLE scan #2 for BlueCharm_190853
ğŸ“¡ Scanning with LEFT antenna (hci0)...
ğŸ” BLE scanning with hci0...
â±ï¸ HCI scanning for 3 seconds on hci0...
ğŸ“Š HCI scan got 142 lines
ğŸ”„ Trying bluetoothctl method on hci0...
ğŸ“Š Bluetoothctl found 0 devices
ğŸ”„ Trying hciscan method on hci0...
ğŸ›ï¸ MODE STABLE: AUTONOMOUS â†’ ASSISTED
ğŸ›‘ AUTONOMOUS MODE STABLE - Rover stopping
âŒ Basic scan error on hci0: Command '['sudo', 'hcitool', '-i', 'hci0', 'scan']' timed out after 10 seconds
ğŸ“¡ Scanning with RIGHT antenna (hci1)...
ğŸ” BLE scanning with hci1...
â±ï¸ HCI scanning for 3 seconds on hci1...
ğŸ›ï¸ MODE STABLE: ASSISTED â†’ AUTONOMOUS
âœ… AUTONOMOUS MODE STABLE - Rover ready to track!
ğŸ“Š HCI scan got 139 lines
âœ… Found target on hci1: DD:34:02:09:CA:1E (unknown)
ğŸ“¶ hci1 detected target: -59dBm
ğŸ“Š Scan results: Left=-100dBm, Right=-59dBm
âœ… Signal detected! Processing...
ğŸ”„ TARGET UPDATE: target_detected remains True
ğŸ“¡ Target detected: 10.0m @ 45Â° (Q:45%)
   RSSI: L=-77.5dBm R=-79.5dBm
ğŸ”„ Starting BLE scan #3 for BlueCharm_190853
ğŸ“¡ Scanning with LEFT antenna (hci0)...
ğŸ” BLE scanning with hci0...
â±ï¸ HCI scanning for 3 seconds on hci0...
ğŸ“Š HCI scan got 142 lines
ğŸ”„ Trying bluetoothctl method on hci0...
ğŸ“Š Bluetoothctl found 0 devices
ğŸ”„ Trying hciscan method on hci0...
âŒ Basic scan error on hci0: Command '['sudo', 'hcitool', '-i', 'hci0', 'scan']' timed out after 10 seconds
ğŸ“¡ Scanning with RIGHT antenna (hci1)...
ğŸ” BLE scanning with hci1...
â±ï¸ HCI scanning for 3 seconds on hci1...
ğŸ“Š HCI scan got 138 lines
âœ… Found target on hci1: DD:34:02:09:CA:1E (unknown)
ğŸ“¶ hci1 detected target: -58dBm
ğŸ“Š Scan results: Left=-100dBm, Right=-58dBm
âœ… Signal detected! Processing...
ğŸ”„ TARGET UPDATE: target_detected remains True
ğŸ“¡ Target detected: 8.9m @ 0Â° (Q:82%)
   RSSI: L=-100dBm R=-59dBm
ğŸ›ï¸ MODE STABLE: AUTONOMOUS â†’ ASSISTED
ğŸ›‘ AUTONOMOUS MODE STABLE - Rover stopping
ğŸ”„ Starting BLE scan #4 for BlueCharm_190853
ğŸ“¡ Scanning with LEFT antenna (hci0)...
ğŸ” BLE scanning with hci0...
ğŸ›ï¸ MODE STABLE: ASSISTED â†’ MANUAL
â±ï¸ HCI scanning for 3 seconds on hci0...
ğŸ“Š HCI scan got 139 lines
ğŸ”„ Trying bluetoothctl method on hci0...
ğŸ“Š Bluetoothctl found 0 devices
ğŸ”„ Trying hciscan method on hci0...
^C
ğŸ›‘ Shutdown requested by user...
ğŸ›‘ Stopping Bluetooth Tracker...
ğŸ“Š HCI basic scan output: 0 chars
ğŸ“¡ Scanning with RIGHT antenna (hci1)...
ğŸ” BLE scanning with hci1...
ğŸ“Š Final runtime: 79.7 seconds
ğŸ“Š === Bluetooth Tracking Statistics ===
   Runtime: 80 seconds
   Bluetooth scans: 4
   Target detections: 3
   Detection rate: 75.0%
   Obstacle avoidances: 0
   Target approaches: 0
   Signal losses: 0
ğŸ‘‹ Tracker shutdown complete
(venv) jay@RoboPi:~/rover_project $