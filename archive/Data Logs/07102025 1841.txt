(venv) jay@RoboPi:~/rover_project $ nano autonomous_bluetooth_fixed_v3.py
(venv) jay@RoboPi:~/rover_project $ python3 autonomous_bluetooth_fixed_v3.py
âœ… Bluetooth (bleak) library available
======================================================================
ğŸ¤– AUTONOMOUS BLUETOOTH-HYBRID NAVIGATOR v3 (FIXED RSSI)
======================================================================

Features:
  âœ… Proven ultrasonic obstacle detection and avoidance
  âœ… Arduino gatekeeper integration
  âœ… Enhanced state-based navigation with improved stuck recovery
  âœ… Comprehensive error handling and statistics
  ğŸ“¡ FIXED: Real RSSI values using callback-based BLE scanning
  ğŸ›¡ï¸ Safety-first design - ultrasonic overrides Bluetooth
  ğŸ“Š Accurate distance tracking with real signal strength
  ğŸ”§ Step 1: Passive detection (0% navigation influence)

ğŸš€ Bluetooth-Hybrid Navigator v3 (FIXED RSSI) Initialized
ğŸ“Š Danger: 30.0cm | Caution: 60.0cm | Safe: 100.0cm
ğŸ“¡ Bluetooth: Enabled
ğŸ“¡ BT Method: Callback-based scanning for real RSSI values
ğŸ“¡ BT Weight: 0% navigation influence
âœ… Arduino connected on /dev/ttyUSB0
ğŸ“¡ Fixed callback-based Bluetooth scanner started
ğŸ“¡ Starting fixed callback-based Bluetooth detection...
ğŸš€ Fixed Navigator started
ğŸ¯ Ready for autonomous navigation with REAL Bluetooth RSSI tracking
âœ… FIXED Navigator ready - switch to autonomous mode
ğŸ“¡ Real RSSI Bluetooth tracking will activate automatically
ğŸ” Watch for REAL signal strength values!
Press Ctrl+C to stop...
ğŸ” EXPLORING: Random turn after 8.0s
ğŸ§­ AUTONOMOUS | EXPLORING | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 6s
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 9s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 12s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 15s
ğŸ” EXPLORING: Random turn after 8.0s
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ” EXPLORING: Random turn after 15.0s
ğŸ§­ AUTONOMOUS | EXPLORING | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 33s
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 39s
ğŸ” EXPLORING: Random turn after 8.0s
ğŸ§­ AUTONOMOUS | EXPLORING | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 42s
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 45s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 48s
ğŸ” EXPLORING: Random turn after 8.0s
ğŸ§­ AUTONOMOUS | EXPLORING | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 51s
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 54s
ğŸš¨ EMERGENCY! Obstacle at 15.3cm - turning left
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 57s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 63s
ğŸ” EXPLORING: Random turn after 8.0s
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | CB: 0 | Runtime: 66s
ğŸš¨ EMERGENCY! Obstacle at 7.3cm - turning right
ğŸ§­ AUTONOMOUS | AVOIDING | US: 7.1cm | BT: No signal | CB: 0 | Runtime: 69s
ğŸ”„ STUCK: Backing up (count: 1)
ğŸ§­ AUTONOMOUS | BACKING | US: 7.1cm | BT: No signal | CB: 0 | Runtime: 72s
   Stuck counter: 1/5
ğŸ”„ RETRY: Switching to left turn (stuck: 0)
ğŸ§­ AUTONOMOUS | AVOIDING | US: 7.1cm | BT: No signal | CB: 0 | Runtime: 75s
ğŸ”„ STUCK: Backing up (count: 1)
ğŸ”„ RETRY: Switching to right turn (stuck: 1)
ğŸ§­ AUTONOMOUS | AVOIDING | US: 7.0cm | BT: No signal | CB: 0 | Runtime: 78s
   Stuck counter: 1/5
^C
ğŸ›‘ Shutdown requested by user...
ğŸ›‘ Stopping Fixed Navigator...
ğŸ“Š Final runtime: 91.1 seconds
ğŸ“Š === Enhanced Navigation Statistics ===
   Runtime: 91 seconds
   Distance measurements: 537
   Obstacle avoidances: 2
   Exploration turns: 6
   Emergency stops: 63
   Stuck recoveries: 0
ğŸ“¡ === REAL RSSI Bluetooth Statistics ===
   Callback detections: 0
   BlueCharm detections: 0
   Callback events: 0
   Detection rate: 0.00/sec
   Callback rate: 0.00/sec
   Strongest RSSI seen: -200 dBm
   Detection timeouts: 0
   Avg measurements/sec: 5.9
ğŸ‘‹ Fixed Navigator shutdown complete
Task was destroyed but it is pending!
task: <Task pending name='Task-1' coro=<BluetoothHybridNavigatorV3.start_callback_scanner() running at /home/jay/rover_project/autonomous_bluetooth_fixed_v3.py:279>>
/usr/lib/python3.11/asyncio/base_events.py:678: RuntimeWarning: coroutine 'BluetoothHybridNavigatorV3.start_callback_scanner' was never awaited
  self._ready.clear()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
Task was destroyed but it is pending!
task: <Task pending name='Task-2' coro=<BluetoothHybridNavigatorV3.start_callback_scanner() running at /home/jay/rover_project/autonomous_bluetooth_fixed_v3.py:279>>
Task was destroyed but it is pending!
task: <Task pending name='Task-3' coro=<BluetoothHybridNavigatorV3.start_callback_scanner() running at /home/jay/rover_project/autonomous_bluetooth_fixed_v3.py:279>>
Task was destroyed but it is pending!
task: <Task pending name='Task-4' coro=<BluetoothHybridNavigatorV3.start_callback_scanner() running at /home/jay/rover_project/autonomous_bluetooth_fixed_v3.py:279>>
(venv) jay@RoboPi:~/rover_project $