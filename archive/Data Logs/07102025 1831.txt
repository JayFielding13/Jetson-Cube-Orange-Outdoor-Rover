(venv) jay@RoboPi:~/rover_project $ nano autonomous_bluetooth_improved_v2.py
(venv) jay@RoboPi:~/rover_project $ python3 autonomous_bluetooth_improved_v2.py
âœ… Bluetooth (bleak) library available
======================================================================
ğŸ¤– AUTONOMOUS BLUETOOTH-HYBRID NAVIGATOR v2
======================================================================

Features:
  âœ… Proven ultrasonic obstacle detection and avoidance
  âœ… Arduino gatekeeper integration
  âœ… Enhanced state-based navigation with improved stuck recovery
  âœ… Comprehensive error handling and statistics
  ğŸ“¡ Enhanced Bluetooth beacon detection with debugging
  ğŸ›¡ï¸ Safety-first design - ultrasonic overrides Bluetooth
  ğŸ“Š Detailed BLE scan statistics and diagnostics
  ğŸ”§ Step 1: Passive detection (0% navigation influence)

ğŸš€ Bluetooth-Hybrid Navigator v2 Initialized
ğŸ“Š Danger: 30.0cm | Caution: 60.0cm | Safe: 100.0cm
ğŸ“¡ Bluetooth: Enabled
ğŸ“¡ BT Scan: 2.0s every 1.0s
ğŸ“¡ BT Weight: 0% navigation influence
âœ… Arduino connected on /dev/ttyUSB0
ğŸ“¡ Enhanced Bluetooth scanner started
ğŸ“¡ Starting enhanced Bluetooth detection loop...
ğŸš€ Enhanced Hybrid Navigator started
ğŸ¯ Ready for autonomous navigation with improved Bluetooth tracking
âœ… Enhanced Navigator ready - switch to autonomous mode
ğŸ“¡ Enhanced Bluetooth tracking will activate automatically
ğŸ” Watch for detailed BLE scan logs and statistics
Press Ctrl+C to stop...
ğŸ” EXPLORING: Random turn after 11.5s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: No signal | Runtime: 12s
ğŸ“¡ BLE scan completed: 20 devices in 2.1s
ğŸ“‹ Devices found in scan #1:
      0D:CE:FC:A2:4F:FA | Unknown         | -100 dBm
      F2:93:4B:AA:5B:8B | Tacx Neo 2T 315 | -100 dBm
      30:AB:CB:F0:B9:9A | Unknown         | -100 dBm
      6F:7C:21:EF:0E:D7 | Unknown         | -100 dBm
      25:D6:80:FA:51:4B | Unknown         | -100 dBm
      1C:AF:4A:20:0B:89 | Unknown         | -100 dBm
      30:24:A9:33:82:60 | HP OfficeJet 25 | -100 dBm
      58:D3:49:EA:C4:AF | Unknown         | -100 dBm
      02:CE:CA:B4:13:8C | Unknown         | -100 dBm
      3F:97:B1:A6:A8:5C | Unknown         | -100 dBm
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #1:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (initial) | Scan: 2.1s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 15s
ğŸ“¡ BLE scan completed: 19 devices in 2.0s
ğŸ“‹ Devices found in scan #2:
      6F:7C:21:EF:0E:D7 | Unknown         | -100 dBm
      30:24:A9:33:82:60 | HP OfficeJet 25 | -100 dBm
      0D:CE:FC:A2:4F:FA | Unknown         | -100 dBm
      F2:93:4B:AA:5B:8B | Tacx Neo 2T 315 | -100 dBm
      3F:97:B1:A6:A8:5C | Unknown         | -100 dBm
      02:CE:CA:B4:13:8C | Unknown         | -100 dBm
      24:FC:E5:21:06:AC | [TV] Samsung 7  | -100 dBm
      50:DE:06:6C:A4:A8 | Unknown         | -100 dBm
      EF:98:16:3F:DD:20 | KICKR CORE CD98 | -100 dBm
      58:6D:64:60:FA:22 | Unknown         | -100 dBm
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #2:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (initial) | Scan: 2.0s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸš¨ EMERGENCY! Obstacle at 28.9cm - turning left
ğŸ§­ AUTONOMOUS | AVOIDING | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 18s
ğŸ“¡ BLE scan completed: 21 devices in 2.0s
ğŸ“‹ Devices found in scan #3:
      30:24:A9:33:82:60 | HP OfficeJet 25 | -100 dBm
      F2:93:4B:AA:5B:8B | Tacx Neo 2T 315 | -100 dBm
      44:1F:86:47:07:51 | Unknown         | -100 dBm
      50:DE:06:6C:A4:A8 | Unknown         | -100 dBm
      26:6A:0E:8B:49:BF | Unknown         | -100 dBm
      58:D3:49:EA:C4:AF | Unknown         | -100 dBm
      0D:CE:FC:A2:4F:FA | Unknown         | -100 dBm
      4D:52:9D:79:33:97 | Unknown         | -100 dBm
      EF:98:16:3F:DD:20 | KICKR CORE CD98 | -100 dBm
      1C:AF:4A:20:0B:89 | Unknown         | -100 dBm
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #3:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 21s
ğŸ“¡ BLE scan completed: 21 devices in 2.0s
ğŸ“‹ Devices found in scan #4:
      F2:93:4B:AA:5B:8B | Tacx Neo 2T 315 | -100 dBm
      26:6A:0E:8B:49:BF | Unknown         | -100 dBm
   ğŸ¯ DD:34:02:09:CA:1E | BlueCharm_19085 | -100 dBm
      25:D6:80:FA:51:4B | Unknown         | -100 dBm
      02:CE:CA:B4:13:8C | Unknown         | -100 dBm
      3F:97:B1:A6:A8:5C | Unknown         | -100 dBm
      30:AB:CB:F0:B9:9A | Unknown         | -100 dBm
      4D:52:9D:79:33:97 | Unknown         | -100 dBm
      24:FC:E5:21:06:AC | [TV] Samsung 7  | -100 dBm
      1C:AF:4A:20:0B:89 | Unknown         | -100 dBm
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #4:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸš¨ EMERGENCY! Obstacle at 25.2cm - turning right
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ“¡ BLE scan completed: 23 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #5:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ“¡ BLE scan completed: 20 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #6:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 30s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ“¡ BLE scan completed: 23 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #7:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 33s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ” EXPLORING: Random turn after 8.0s
ğŸ“¡ BLE scan completed: 21 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #8:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸ§­ AUTONOMOUS | EXPLORING | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 36s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ“¡ BLE scan completed: 21 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #9:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 39s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ“¡ BLE scan completed: 17 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #10:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 42s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ“¡ BLE scan completed: 20 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #11:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸ” EXPLORING: Random turn after 8.0s
ğŸ§­ AUTONOMOUS | EXPLORING | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 45s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ” EXPLORATION COMPLETE: Resuming forward
ğŸ“¡ BLE scan completed: 20 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #12:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 48s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ“¡ BLE scan completed: 22 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #13:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 51s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸš¨ EMERGENCY! Obstacle at 24.7cm - turning left
ğŸ“¡ BLE scan completed: 21 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #14:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
âœ… CLEAR: Path ahead at 200.0cm - resuming forward
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 54s
ğŸ“¡ BLE scan starting (timeout: 2.0s)...
ğŸ“¡ BLE scan completed: 21 devices in 2.0s
ğŸ¯ BlueCharm FOUND! MAC: DD:34:02:09:CA:1E | RSSI: -100 dBm
ğŸ“¡ BlueCharm DETECTED #15:
   RSSI: -100dBm | Distance: ~30.0m
   Avg RSSI: -100dBm (stable) | Scan: 2.0s
ğŸ§­ AUTONOMOUS | STRAIGHT | US: 200.0cm | BT: 30.0m (-100dBm) | Scan: 100% | Runtime: 57s
^C
ğŸ›‘ Shutdown requested by user...
ğŸ›‘ Stopping Enhanced Hybrid Navigator...
ğŸ“Š Final runtime: 65.8 seconds
ğŸ“Š === Enhanced Navigation Statistics ===
   Runtime: 66 seconds
   Distance measurements: 392
   Obstacle avoidances: 3
   Exploration turns: 3
   Emergency stops: 0
   Stuck recoveries: 0
ğŸ“¡ === Bluetooth Statistics ===
   Total scan attempts: 15
   Successful scans: 15
   Failed scans: 0
   BlueCharm detections: 15
   Scan success rate: 100.0%
   Detection rate: 0.23/sec
   Strongest RSSI seen: -100 dBm
   Detection timeouts: 0
   Last scan duration: 2.0s
   Avg measurements/sec: 6.0
ğŸ‘‹ Enhanced Navigator shutdown complete
(venv) jay@RoboPi:~/rover_project $